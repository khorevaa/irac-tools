#Использовать logos
#Использовать tempfiles
#Использовать fs

Перем ЛогПриложения;
Перем ОбщиеПараметры;
Перем СохрКаталогПриложения;
Перем ЭтоПриложениеEXE;

Процедура Инициализация()

	ОбщиеПараметры = Новый Структура();

КонецПроцедуры

Функция ЭтоСборкаEXE() Экспорт
	
	Если ЭтоПриложениеEXE = Неопределено Тогда
		ЭтоПриложениеEXE = ВРег(Прав(ТекущийСценарий().Источник, 3)) = "EXE";
	КонецЕсли;

	Возврат ЭтоПриложениеEXE;

КонецФункции

Функция КаталогПриложения() Экспорт
	
	Если Не СохрКаталогПриложения = Неопределено Тогда
		Возврат СохрКаталогПриложения;
	КонецЕсли;

	ПутьККаталогу = ОбъединитьПути(ТекущийСценарий().Каталог, "..", "..", "..");

	ФайлКаталога = Новый Файл(ПутьККаталогу);
	СохрКаталогПриложения = ФайлКаталога.ПолноеИмя;
	
	Возврат СохрКаталогПриложения;

КонецФункции

Функция УровеньЛога() Экспорт

	Возврат ЛогПриложения.Уровень();

КонецФункции

Процедура УстановитьРежимОтладкиПриНеобходимости(Знач РежимОтладки) Экспорт
	
	Если РежимОтладки Тогда
		
		Лог().УстановитьУровень(УровниЛога.Отладка);

	КонецЕсли;
	
КонецПроцедуры 

Функция Параметры() Экспорт

	Возврат ОбщиеПараметры;

КонецФункции

Функция Лог() Экспорт
	
	Если ЛогПриложения = Неопределено Тогда
		ЛогПриложения = Логирование.ПолучитьЛог(ИмяЛогаПриложения());
	КонецЕсли;

	Возврат ЛогПриложения;

КонецФункции

Функция ИмяЛогаПриложения() Экспорт

	Возврат "oscript.app." + ИмяПриложения();
	
КонецФункции

Функция ИмяПриложения() Экспорт

	Возврат "irac-tools";
		
КонецФункции

Функция Версия() Экспорт
	
	Возврат "0.1.0";
			
КонецФункции

Инициализация();
